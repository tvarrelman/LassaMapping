function lassaBarChart(e){if($("#HumanDiv").html(""),$("#RodentDiv").html(""),$("#SeqHumanDiv").html(""),$("#SeqRodentDiv").html(""),"human"==e){document.getElementById("HumanDiv");let e=[],p=[];for(var o in propAb)e.push(propAb[o].Ab_year),p.push(propAb[o].propAbPos);var t={};for(var o in propAb){var n=propAb[o].DiagnosticMethod;t[n]||(t[n]=[]),t[n].push(propAb[o])}for(var r in data2=[],t){for(var o in Ab_year=[],propAbPos=[],t[r])Ab_year.push(t[r][o].Ab_year),propAbPos.push(t[r][o].propAbPos);var a={x:Ab_year,y:propAbPos,name:"Serology: ".concat(r),type:"bar",barmode:"group"};data2.push(a)}var i={title:v="Viral Infection: Humans",font:{color:"#1a1a1a"},autosize:!0,automargin:!1,margin:{l:55,r:10,b:50,t:50,pad:4},xaxis:{title:{text:"Year"},fixedrange:!0},yaxis:{title:{text:"Proportion of Individuals"},fixedrange:!0},showlegend:!0,legend:{bgcolor:"rgba(0,0,0,0)",x:.45,xanchor:"center",y:1,orientation:"h"}},l=[{x:e,y:p,type:"bar",name:"Serology",marker:{color:"#f0ad4e"}}];let s=[["toImage","lasso2d"]];Plotly.newPlot("HumanDiv",l,i,{modeBarButtons:s,responsive:!0,displaylogo:!1}),$("#HumanDiv").unbind("click"),$("#HumanDiv").on("click",function(){document.getElementById("HumanDiv").data==l?(Plotly.newPlot("HumanDiv",data2,i,{modeBarButtons:s,responsive:!0,displaylogo:!1}),document.getElementById("HumanDiv").on("plotly_legendclick",function(){return!1})):(Plotly.newPlot("HumanDiv",l,i,{modeBarButtons:s,responsive:!0,displaylogo:!1}),document.getElementById("HumanDiv").on("plotly_legendclick",function(){return!1}))}),document.getElementById("HumanDiv").on("plotly_legendclick",function(){return!1})}if("rodent"==e){document.getElementById("RodentDiv"),i={title:v="Viral Infection: Rodents",font:{color:"#1a1a1a"},autosize:!0,automargin:!1,margin:{l:55,r:10,b:50,t:50,pad:4},xaxis:{title:{text:"Year"},fixedrange:!0},yaxis:{title:{text:"Proportion of Individuals"},fixedrange:!0},legend:{bgcolor:"rgba(0,0,0,0)",x:.45,xanchor:"center",y:1,orientation:"h"}};var p={},s={};for(var o in propAb){var d=propAb[o].AbDiagnosticMethod;p[d]||(p[d]=[]),p[d].push(propAb[o])}for(var o in propAg){var u=propAg[o].VirusDiagnosticMethod;s[u]||(s[u]=[]),s[u].push(propAg[o])}for(var r in data2=[],p){for(var o in Ab_year=[],propAbPos=[],p[r])Ab_year.push(p[r][o].Ab_year),propAbPos.push(p[r][o].propAbPos);var c="Serology: ".concat(r),g={x:Ab_year,y:propAbPos,name:c,type:"bar",barmode:"group"};data2.push(g)}for(var r in s){for(var o in Ag_year=[],propAgPos=[],s[r])Ag_year.push(s[r][o].Ag_year),propAgPos.push(s[r][o].propAgPos);var m="Virus detection: ".concat(r),y={x:Ag_year,y:propAgPos,name:m,type:"bar",barmode:"group"};data2.push(y)}let e=[],t=[];for(var o in propAb)e.push(propAb[o].Ab_year),t.push(propAb[o].propAbPos);let n=[],a=[];for(var b in propAg)n.push(propAg[b].Ag_year),a.push(propAg[b].propAgPos);l=[g={x:e,y:t,name:"Virus detection",type:"bar",barmode:"group",marker:{color:"#7f7fff"}},y={x:n,y:a,name:"Serology",type:"bar",barmode:"group",marker:{color:"#f0ad4e"}}];let f=[["toImage","lasso2d"]];Plotly.newPlot("RodentDiv",l,i,{modeBarButtons:f,responsive:!0,displaylogo:!1}),$("#RodentDiv").unbind("click"),$("#RodentDiv").on("click",function(){document.getElementById("RodentDiv").data==l?(Plotly.newPlot("RodentDiv",data2,i,{modeBarButtons:f,responsive:!0,displaylogo:!1}),document.getElementById("RodentDiv").on("plotly_legendclick",function(){return!1})):(Plotly.newPlot("RodentDiv",l,i,{modeBarButtons:f,responsive:!0,displaylogo:!1}),document.getElementById("RodentDiv").on("plotly_legendclick",function(){return!1}))}),document.getElementById("RodentDiv").on("plotly_legendclick",function(){return!1})}if("sequence rodent"==e){var v="Viral Sequences: Rodents";let e=[],t=[];for(var o in seqData)e.push(seqData[o].seq_year),t.push(seqData[o].seq_count);l=[{x:e,y:t,name:"Numer of Sequences",type:"bar",marker:{color:"#f0ad4e"}}],i={title:v,font:{color:"#1a1a1a"},autosize:!0,automargin:!1,margin:{l:55,r:10,b:50,t:50,pad:4},xaxis:{title:{text:"Year"},fixedrange:!0},yaxis:{title:{text:"Number of Sequences"},fixedrange:!0},showlegend:!0,legend:{bgcolor:"rgba(0,0,0,0)",x:.45,xanchor:"center",y:1,orientation:"h"}};let n=[["toImage","lasso2d"]];Plotly.newPlot("SeqRodentDiv",l,i,{modeBarButtons:n,responsive:!0,displaylogo:!1}),document.getElementById("SeqRodentDiv").on("plotly_legendclick",function(){return!1})}if("sequence human"==e){v="Viral Sequences: Humans";let e=[],t=[];for(var o in seqData)e.push(seqData[o].seq_year),t.push(seqData[o].seq_count);l=[{x:e,y:t,name:"Numer of Sequences",type:"bar",marker:{color:"#f0ad4e"}}],i={title:v,font:{color:"#1a1a1a"},autosize:!0,automargin:!1,margin:{l:55,r:10,b:50,t:50,pad:4},xaxis:{title:{text:"Year"},fixedrange:!0},yaxis:{title:{text:"Number of Sequences"},fixedrange:!0},showlegend:!0,legend:{bgcolor:"rgba(0,0,0,0)",x:.45,xanchor:"center",y:1,orientation:"h"}};let n=[["toImage","lasso2d"]];Plotly.newPlot("SeqHumanDiv",l,i,{modeBarButtons:n,responsive:!0,displaylogo:!1}),document.getElementById("SeqHumanDiv").on("plotly_legendclick",function(){return!1})}}

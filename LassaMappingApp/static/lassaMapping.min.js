if(window.matchMedia("(max-width: 767px)").matches)var mapOptions={center:[9.531665,4.460415],zoom:3,tap:!1};else mapOptions={center:[10.531665,0],zoom:5,tap:!1};var map=new L.map("map",mapOptions),layer=new L.TileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");map.addLayer(layer);var markers=L.markerClusterGroup(),start_year_select=$("#StartYear"),end_year_select=$("#EndYear");function getUpdatedEndYear(e,r){var a={start_year:e,host:r};$.ajax({async:!1,url:"/_get_end_year",data:a,dataType:"json",success:function(e){for(var r in end_year_select.empty(),e)end_year_select.append($("<option>",{value:e[r].end_year,text:e[r].end_year},"</option>"))}})}function GetFilteredPoints(e,r,a){var i={start_year:e,end_year:r,host:a};return $.ajax({async:!1,url:"/_filter_points",data:i,dataType:"json",success:function(e){result=e}}),result}function MapPoints(e,r,a){a=a;for(var i in markers.clearLayers(),a.removeLayer(markers),e){if(coordPair=e[i],"human"==r){var o=L.icon({iconUrl:"/static/images/baseline_person_black_18dp.png",iconSize:[35,35]}),t="<b>Serology, proportion positive:</b> "+coordPair.PropAb,n="<b>Citation:</b> "+coordPair.Citation;if("NaN"==coordPair.DOI)b="<b>DOI:</b> NaN";else var b="<b>DOI:</b> <a href='https://doi.org/"+coordPair.DOI+"' target='_blank'>link</a>";title=t+"<br> <br>"+n+"<br> <br>"+b}if("rodent"==r){o=L.icon({iconUrl:"/static/images/baseline_pest_control_rodent_black_18dp.png",iconSize:[35,35]}),t="<b>Serology, proportion positive:</b> "+coordPair.PropAb;var c="<b>Virus detection, proportion positive:</b> "+coordPair.PropVirus;n="<b> Citation:</b> "+coordPair.Citation;if("NaN"==coordPair.DOI)b="<b>DOI:</b> NaN";else b="<b>DOI:</b> <a href='https://doi.org/"+coordPair.DOI+"' target='_blank'>link</a>";title=t+"<br> <br>"+c+"<br> <br>"+n+"<br> <br>"+b}if("sequence rodent"==r){o=L.icon({iconUrl:"/static/images/baseline_virus_black_18dp.png",iconSize:[35,35]});var s="<b>GenBank description:</b> "+coordPair.gbDefinition,d="<b>Reference:</b> "+coordPair.Reference;if("NaN"==coordPair.gbPubMedID)p="<b>PubMed:</b> NaN";else var p="<b>PubMed:</b> <a href='https://pubmed.ncbi.nlm.nih.gov/"+coordPair.gbPubMedID+"' target='_blank'>link</a>";title=s+"<br> <br>"+d+"<br> <br>"+p}if("sequence human"==r){o=L.icon({iconUrl:"/static/images/baseline_virus_black_18dp.png",iconSize:[35,35]}),s="<b>GenBank description:</b> "+coordPair.gbDefinition,d="<b>Reference:</b> "+coordPair.Reference;if("NaN"==coordPair.gbPubMedID)p="<b>PubMed:</b> NaN";else p="<b>PubMed:</b> <a href='https://pubmed.ncbi.nlm.nih.gov/"+coordPair.gbPubMedID+"' target='_blank'>link</a>";title=s+"<br> <br>"+d+"<br> <br>"+p}var l=L.marker(new L.LatLng(coordPair.Latitude,coordPair.Longitude,{title:title}));l.bindPopup(title),l.setIcon(o),markers.addLayer(l)}a.addLayer(markers)}